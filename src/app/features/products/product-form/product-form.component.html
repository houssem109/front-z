<div class="container-fluid p-0">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">{{ isEditMode ? 'Edit' : 'Add' }} Product</h1>
    <p class="text-muted">{{ isEditMode ? 'Update product information' : 'Create a new product' }}</p>
  </div>
  
  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  
  <!-- Error Alert -->
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>
  
  <!-- Product Form -->
  <div *ngIf="!isLoading" class="card shadow-sm">
    <div class="card-body">
      <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
        <div class="row g-3">
          <!-- Product Name -->
          <div class="col-md-6">
            <div class="form-group mb-3">
              <label for="name" class="form-label">Product Name <span class="text-danger">*</span></label>
              <input 
                type="text" 
                id="name" 
                formControlName="name"
                class="form-control" 
                [ngClass]="{'is-invalid': f['name'].touched && f['name'].errors}"
              >
              <div *ngIf="f['name'].touched && f['name'].errors" class="invalid-feedback">
                <span *ngIf="f['name'].errors['required']">Product name is required</span>
                <span *ngIf="f['name'].errors['maxlength']">Product name must be at most 100 characters</span>
              </div>
            </div>
          </div>
          
          <!-- SKU -->
          <div class="col-md-6">
            <div class="form-group mb-3">
              <label for="sku" class="form-label">SKU</label>
              <input 
                type="text" 
                id="sku" 
                formControlName="sku"
                class="form-control"
              >
            </div>
          </div>
          
          <!-- Price -->
          <div class="col-md-6">
            <div class="form-group mb-3">
              <label for="price" class="form-label">Price ($) <span class="text-danger">*</span></label>
              <input 
                type="number" 
                id="price" 
                formControlName="price"
                class="form-control" 
                step="0.01" 
                [ngClass]="{'is-invalid': f['price'].touched && f['price'].errors}"
              >
              <div *ngIf="f['price'].touched && f['price'].errors" class="invalid-feedback">
                <span *ngIf="f['price'].errors['required']">Price is required</span>
                <span *ngIf="f['price'].errors['min']">Price must be a positive number</span>
              </div>
            </div>
          </div>
          
          <!-- Stock Quantity -->
          <div class="col-md-6">
            <div class="form-group mb-3">
              <label for="stockQuantity" class="form-label">Stock Quantity <span class="text-danger">*</span></label>
              <input 
                type="number" 
                id="stockQuantity" 
                formControlName="stockQuantity"
                class="form-control" 
                [ngClass]="{'is-invalid': f['stockQuantity'].touched && f['stockQuantity'].errors}"
              >
              <div *ngIf="f['stockQuantity'].touched && f['stockQuantity'].errors" class="invalid-feedback">
                <span *ngIf="f['stockQuantity'].errors['required']">Stock quantity is required</span>
                <span *ngIf="f['stockQuantity'].errors['min']">Stock quantity must be a positive number</span>
              </div>
            </div>
          </div>
          
          <!-- Category -->
          <div class="col-md-6">
            <div class="form-group mb-3">
              <label for="category" class="form-label">Category</label>
              <select 
                id="category" 
                formControlName="category"
                class="form-select"
              >
                <option value="">Select a category</option>
                <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
              </select>
            </div>
          </div>
          
          <!-- Image URL -->
          <div class="col-md-6">
            <div class="form-group mb-3">
              <label for="imageUrl" class="form-label">Image URL</label>
              <input 
                type="text" 
                id="imageUrl" 
                formControlName="imageUrl"
                class="form-control"
              >
            </div>
          </div>
          
          <!-- Description -->
          <div class="col-12">
            <div class="form-group mb-3">
              <label for="description" class="form-label">Description</label>
              <textarea 
                id="description" 
                formControlName="description"
                class="form-control" 
                rows="4"
              ></textarea>
            </div>
          </div>
          
          <!-- Preview Image -->
          <div class="col-12 mb-3" *ngIf="f['imageUrl'].value">
            <label class="form-label">Image Preview</label>
            <div class="image-preview">
              <img [src]="f['imageUrl'].value" alt="Product Image Preview">
            </div>
          </div>
          
          <!-- Form Buttons -->
          <div class="col-12 d-flex justify-content-end">
            <button 
              type="button" 
              class="btn btn-outline-secondary me-2" 
              [routerLink]="['/products']"
            >
              Cancel
            </button>
            <button 
              type="submit" 
              class="btn btn-primary" 
              [disabled]="isSubmitting"
            >
              <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
              {{ isEditMode ? 'Update' : 'Create' }} Product
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>